################################################################################
# Threading (trylock) failures
#
# Syntax (similar to a cron file):
#   [jobname] [compiler] [config] [provider] [direct] [am] [pmix] [sed of XFAIL]

# Normal tests
* * * * * * * sed -i "s+\(^nonblocking3 .*\)+\1 xfail=csr/mpich-ofi#1300+g" test/mpi/coll/testlist

# MT tests
* * * * auto am * sed -i "s+\(^mt_issendirecv .*\)+\1 xfail=csr/mpich-ofi#1847+g" test/mpi/threads/pt2pt/testlist
* gnu default sockets auto noam * sed -i "s+\(^mt_issendirecv .*\)+\1 xfail=csr/mpich-ofi#1962+g" test/mpi/threads/pt2pt/testlist
* * * * * * * sed -i "s+\(^ctxi\?dup .*\)+\1 xfail=csr/mpich-ofi#1560+g" test/mpi/threads/comm/testlist
* * * * * * * sed -i "s+\(^mt_accfence_normal .*\)+\1 xfail=csr/mpich-ofi#1568+g" test/mpi/threads/rma/testlist
* * default * netmod noam * sed -i "s+\(^mt_put_huge .*\)+\1 xfail=csr/mpich-ofi#1713+g" test/mpi/threads/rma/testlist
* * default * netmod noam * sed -i "s+\(^mt_get_huge .*\)+\1 xfail=csr/mpich-ofi#1713+g" test/mpi/threads/rma/testlist

* * * * * * * sed -i "s+\(^mt_getaccfence_normal .*\)+\1 xfail=csr/mpich-ofi#1569+g" test/mpi/threads/rma/testlist
* gnu default sockets auto noam * sed -i "s+\(^mt_ibsendirecv .*\)+\1 xfail=csr/mpich-ofi#1594+g" test/mpi/threads/pt2pt/testlist
* * * * * * * sed -i "s+\(^mt_isendirecv .*\)+\1 xfail=csr/mpich-ofi#1743+g" test/mpi/threads/pt2pt/testlist

* * * * * * * sed -i "s+\(^mt_iprobe_isendrecv .*\)+\1 xfail=csr/mpich-ofi#1789+g" test/mpi/threads/pt2pt/testlist
* * * * netmod * * sed -i "s+\(^mt_isendirecv .*\)+\1 xfail=csr/mpich-ofi#1834+g" test/mpi/threads/pt2pt/testlist
* * * * * * * sed -i "s+\(^mt_probe_isendrecv .*\)+\1 xfail=csr/mpich-ofi#1838+g" test/mpi/threads/pt2pt/testlist

* * debug * auto * * sed -i "s+\(^lockall_dt 4 arg=-type=MPI_INT arg=-count=262144 arg=-seed=107 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1919+g" test/mpi/rma/testlist.dtp
* * debug * auto * * sed -i "s+\(^lockall_dt_flush 4 arg=-type=MPI_INT arg=-count=262144 arg=-seed=113 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1919+g" test/mpi/rma/testlist.dtp
* * debug * auto * * sed -i "s+\(^lockall_dt_flushall 4 arg=-type=MPI_INT arg=-count=262144 arg=-seed=119 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1919+g" test/mpi/rma/testlist.dtp
* * debug * auto * * sed -i "s+\(^lockall_dt_flushlocal 4 arg=-type=MPI_INT arg=-count=262144 arg=-seed=125 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1919+g" test/mpi/rma/testlist.dtp
* * debug * auto * * sed -i "s+\(^lockall_dt_flushlocalall 4 arg=-type=MPI_INT arg=-count=262144 arg=-seed=131 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1919+g" test/mpi/rma/testlist.dtp

* * debug * auto * * sed -i "s+\(^lock_dt 2 arg=-type=MPI_INT arg=-count=262144 arg=-seed=89 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1920+g" test/mpi/rma/testlist.dtp
* * debug * auto * * sed -i "s+\(^lock_dt_flush 2 arg=-type=MPI_INT arg=-count=262144 arg=-seed=95 arg=-testsize=16.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1920+g" test/mpi/rma/testlist.dtp

* * debug sockets auto am * sed -i "s+\(^pingping 2 arg=-type=MPI_INT arg=-sendcnt=262144 arg=-recvcnt=524288 arg=-seed=24 arg=-testsize=8.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1918+g" test/mpi/pt2pt/testlist.dtp
* * debug sockets auto noam * sed -i "s+\(^pingping 2 arg=-type=MPI_INT arg=-sendcnt=262144 arg=-recvcnt=524288 arg=-seed=24 arg=-testsize=8.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0 xfail=csr/mpich-ofi#1918+g" test/mpi/pt2pt/testlist.dtp

* gnu default sockets auto noam * sed -i "s+\(^mt_mprobe_isendrecv 2 arg=-iter=1024 arg=-count=1.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0  xfail=csr/mpich-ofi#1923+g" test/mpi/threads/pt2pt/testlist
* gnu debug sockets no-odd-even * * sed -i "s+\(^mt_mprobe_isendrecv 2 arg=-iter=1024 arg=-count=1.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0  xfail=csr/mpich-ofi#1923+g" test/mpi/threads/pt2pt/testlist
* * * sockets * noam * sed -i "s+\(^mt_improbe_isendrecv .*\)+\1 xfail=csr/mpich-ofi#1923+g" test/mpi/threads/pt2pt/testlist
* gnu default sockets auto am * sed -i "s+\(^mt_irsendrecv 2 arg=-iter=1024 arg=-count=1.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0  xfail=csr/mpich-ofi#1925+g" test/mpi/threads/pt2pt/testlist
* gnu default sockets auto * * sed -i "s+\(^mt_ibsendirecv 2 arg=-iter=1024 arg=-count=1.*\)+\1 env=MPIR_CVAR_CH4_OFI_MAX_RMA_SEP_CTX=0  xfail=csr/mpich-ofi#1925+g" test/mpi/threads/pt2pt/testlist

* * debug * auto * * sed -i "s+\(^bcastlength .*\)+\1 env=MPIR_CVAR_BCAST_POSIX_INTRA_ALGORITHM=mpir+g" test/mpi/errors/coll/testlist
* * debug * auto * * sed -i "s+\(^ibcastlength .*\)+\1 env=MPIR_CVAR_IBCAST_POSIX_INTRA_ALGORITHM=mpir+g" test/mpi/errors/coll/testlist
