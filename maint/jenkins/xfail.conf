# Conditional XFAIL settings
#
# Syntax (similar to a cron file):
#   [jobname] [compiler] [config] [provider] [direct] [am] [pmix] [sed of XFAIL]
#   Note that the [jobname] allows partial matches (see examples). Other
#   conditions only allows exact matches.
#
# Examples:
#   nightly gnu debug sockets auto noam sed -i "..."
#   This will apply the set the XFAIL when the job is "nightly-ancc" or
#   "nightly", the compiler is "gnu", the jenkins_configure is
#   "debug", provider is "sockets", shm configuration is "auto",
#   and force_am configuration is "noam".
#
# Important note:
#   The BSD sed on FreeBSD and OSX nodes has different parameters than the GNU
#   sed. You should use `gsed` than `sed` on them.
#
# For each build, all applied XFAILS will be summarized in
# ${SOURCE}/apply-xfail.sh
#
################################################################################
* * default * * * *   /errors/   disable  test/mpi/testlist

################################################################################
* * * * * * *         /idup_comm_gen .*/        xfail=csr/mpich-ofi#982   test/mpi/threads/comm/testlist
* * * * * * *         /idup_nb .*/              xfail=csr/mpich-ofi#967   test/mpi/threads/comm/testlist
* * * * * am *        /^th_taskmanager .*/      xfail=csr/mpich-ofi#965   test/mpi/threads/spawn/testlist
* * * * * noam *      /^th_taskmanager .*/      xfail=csr/mpich-ofi#685   test/mpi/threads/spawn/testlist
* * * psm2 * noam *   /^multispawn .*/          xfail=csr/mpich-ofi#2254  test/mpi/threads/spawn/testlist

* * * * * * *  /^reducelength .*/      xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^ireducelength .*/     xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^allreducelength .*/   xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^iallreducelength .*/  xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^reduceop .*/          xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^ireduceop .*/         xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^gatherlength .*/      xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^igatherlength .*/     xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^allgatherlength .*/   xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^iallgatherlength .*/  xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^alltoalllength .*/    xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^scatterlength .*/     xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist
* * * * * * *  /^iscatterlength .*/    xfail=csr/mpich-ofi#59  test/mpi/errors/coll/testlist

* * * * * * *  /^allred3.* env=MPIR_CVAR_IALLREDUCE_INTRA_ALGORITHM=gentran_recexch_single_buffer_without_dtcopy.*/   xfail=csr/mpich-ofi#1865  test/mpi/coll/testlist.collalgo
* * * * * * *  /^allred4.* env=MPIR_CVAR_IALLREDUCE_INTRA_ALGORITHM=gentran_recexch_single_buffer_without_dtcopy.*/   xfail=csr/mpich-ofi#1865  test/mpi/coll/testlist.collalgo
* * * * * * *  /^pingping.* arg=-sendcnt=1 .*/   xfail=csr/mpich-ofi#2485  test/mpi/pt2pt/testlist.dtp
* * * * * * *  /^pingping.* arg=-sendcnt=17 .*/  xfail=csr/mpich-ofi#2485  test/mpi/pt2pt/testlist.dtp

* * * sockets * noam *      /^i_hindexed .*/             xfail=csr/mpich-ofi#804   test/mpi/io/testlist
* * * * auto * *            /^atomic_get_short_int .*/   xfail=pmodels/mpich#3380  test/mpi/rma/testlist
* * * * netmod * *          /^atomic_get_short_int .*/   xfail=pmodels/mpich#3380  test/mpi/rma/testlist
* * * * no-odd-even * *     /^atomic_get_short_int .*/   xfail=pmodels/mpich#3380  test/mpi/rma/testlist
* icc default psm2 auto * * /^manyget .*/                xfail=#4354               test/mpi/rma/testlist

* * default sockets no-odd-even * *   /^spaiccreate2 .*/   xfail=csr/mpich-ofi#1522  test/mpi/spawn/testlist
* * * sockets no-odd-even noam *      /^disconnect3 .*/    xfail=csr/mpich-ofi#1722  test/mpi/spawn/testlist

* * * * * noam *                  /^mt_.*_huge.* env=MPIR_CVAR_CH4_OFI_EAGER_MAX_MSG_SIZE=16384.*/   xfail=csr/mpich-ofi#2042  test/mpi/threads/pt2pt/testlist
* * debug * * noam *              /^large_small_acc 2.*/                                             xfail=csr/mpich-ofi#2131  test/mpi/rma/testlist
* * * * no-odd-even noam *        /^truncmsg_mrecv .*/                                               xfail=csr/mpich-ofi#2270  test/mpi/errors/pt2pt/testlist
* * debug sockets netmod noam *   /^cas_type_check .*/                                               xfail=csr/mpich-ofi#2313  test/mpi/errors/rma/testlist

* * * * * noam *  /^disconnect2 .*/   xfail=csr/mpich-ofi#2328  test/mpi/spawn/testlist

################################################################################
#These tests are xfailed in master as well.
* * * * * * *             /^large_acc_flush_local 3/   xfail=ticket3251  test/mpi/rma/testlist
* * * psm2 netmod noam *  /^lockall_dt_flushall [0-9]* arg=-type=.* arg=-count=65530 arg=-seed=221 arg=-testsize=16 .*/   xfail=ticket#3932  test/mpi/rma/testlist.dtp
* * * * * am *            /^truncmsg_mrecv .*/   xfail=ticket0  test/mpi/errors/pt2pt/testlist

###The following have been taken from master but the ticket number referred here is closed.
* * * * * * *  /^getfence1 [0-9]* arg=-type=.* arg=-count=16000000 .*/         xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^putfence1 [0-9]* arg=-type=.* arg=-count=16000000 .*/         xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^lock_contention_dt [0-9]* arg=-type=.* arg=-count=262144 .*/  xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^lock_dt.* [0-9]* arg=-type=.* arg=-count=262144 .*/           xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^lockall_dt.* [0-9]* arg=-type=.* arg=-count=262144 .*/        xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^epochtest [0-9]* arg=-type=.* arg=-count=262144 .*/           xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^lock_contention_dt [0-9]* arg=-type=.* arg=-count=32768 .*/   xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^lock_dt.* [0-9]* arg=-type=.* arg=-count=32768 .*/            xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^lockall_dt.* [0-9]* arg=-type=.* arg=-count=32768 .*/         xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^accfence1 [0-9]* arg=-type=.* arg=-count=262144 .*/           xfail=ticket2965  test/mpi/rma/testlist.dtp
* * * * * * *  /^accpscw1 [0-9]* arg=-type=.* arg=-count=262144 .*/            xfail=ticket2965  test/mpi/rma/testlist.dtp

################################################################################
# icc failures
* icc default sockets thread noam *   /^nonblocking3.*/   xfail=csr/mpich-ofi#2186  test/mpi/coll/testlist
* icc default sockets auto noam *     /^large_message.*/  xfail=csr/mpich-ofi#2225  test/mpi/pt2pt/testlist

################################################################################
# psm2-specific failures
* * * psm2 * noam *   /^th_taskmanager .*/                               xfail=csr/mpich-ofi#1066  test/mpi/threads/spawn/testlist
* * * psm2 * noam *   /^spawnmanyarg .*/                                 xfail=csr/mpich-ofi#942   test/mpi/spawn/testlist
* * * psm2 * * *      /^ic2 .*/                                          xfail=csr/mpich-ofi#971   test/mpi/comm/testlist
* * * psm2 * * *      /^darray_pack 72/                                  xfail=csr/mpich-ofi#971   test/mpi/datatype/testlist
* * * psm2 * * *      /^taskmanager .*/                                  xfail=csr/mpich-ofi#942   test/mpi/spawn/testlist
* * * psm2 * * *      /^concurrent_spawns .*/                            xfail=csr/mpich-ofi#953   test/mpi/spawn/testlist
* * * psm2 * * *      /^spawn_rootargs .*/                               xfail=csr/mpich-ofi#953   test/mpi/spawn/testlist
* * * psm2 * * *      /^.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/  xfail=no_am_triggered_ops test/mpi/coll/testlist.collalgo
* * * psm2 * am *     /^allgatherv4 4/                                   xfail=csr/mpich-ofi#2272  test/mpi/coll/testlist

################################################################################
# verbs;ofi_rxm-specific failures
* * * verbs;ofi_rxm * * *     /^spawn2 .*/                                       xfail=csr/mpich-ofi#2248  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * * *     /^taskmanager .*/                                  xfail=csr/mpich-ofi#2248  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * * *     /^taskmanager .*/                                  xfail=csr/mpich-ofi#2248  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * noam *  /^spawnmanyarg .*/                                 xfail=csr/mpich-ofi#2248  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * * *     /^concurrent_spawns .*/                            xfail=csr/mpich-ofi#2248  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * * *     /^.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/  xfail=no_am_triggered_ops test/mpi/coll/testlist.collalgo
* * * verbs;ofi_rxm * * *     /^disconnect_reconnect3 .*/                        xfail=csr/mpich-ofi#2303  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * * *     /^disconnect3 .*/                                  xfail=csr/mpich-ofi#2303  test/mpi/spawn/testlist
* * * verbs;ofi_rxm * * *     /^spawn_rootargs .*/                               xfail=csr/mpich-ofi#2303  test/mpi/spawn/testlist

################################################################################
# am-specific failures

* * * * * am *        /^spawn1 .*/                     xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawn2 .*/                     xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawninfo1 .*/                 xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawnminfo1 .*/                xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawnintra .*/                 xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawnargv .*/                  xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawnmanyarg .*/               xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawnmult2 .*/                 xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spaconacc .*/                  xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spaconacc2 .*/                 xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^selfconacc .*/                 xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spaiccreate .*/                xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spaiccreate2 .*/               xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^taskmanager .*/                xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^join .*/                       xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^disconnect_reconnect .*/       xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^disconnect_reconnect2 .*/      xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^disconnect_reconnect3 .*/      xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^multiple_ports .*/             xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^multiple_ports2 .*/            xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^disconnect .*/                 xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^disconnect2 .*/                xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^disconnect3 .*/                xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^concurrent_spawns .*/          xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^pgroup_connect_test .*/        xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawn_rootargs .*/             xfail=csr/mpich-ofi#965   test/mpi/spawn/testlist
* * * * * am *        /^spawnf .*/                     xfail=csr/mpich-ofi#965   test/mpi/f77/spawn/testlist
* * * * * am *        /^spawnargvf .*/                 xfail=csr/mpich-ofi#965   test/mpi/f77/spawn/testlist
* * * * * am *        /^connaccf .*/                   xfail=csr/mpich-ofi#965   test/mpi/f77/spawn/testlist
* * * * * am *        /^spawnmultf .*/                 xfail=csr/mpich-ofi#965   test/mpi/f77/spawn/testlist
* * * * * am *        /^spawnmult2f .*/                xfail=csr/mpich-ofi#965   test/mpi/f77/spawn/testlist
* * * * * am *        /^spawnintrax .*/                xfail=csr/mpich-ofi#965   test/mpi/cxx/spawn/testlist
* * * * * am *        /^spawnargvx .*/                 xfail=csr/mpich-ofi#965   test/mpi/cxx/spawn/testlist
* * * * * am *        /^selfconaccx .*/                xfail=csr/mpich-ofi#965   test/mpi/cxx/spawn/testlist
* * * * * am *        /^spawnf90 .*/                   xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^spawnargvf90 .*/               xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^connaccf90 .*/                 xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^spawnmultf90 .*/               xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^spawnmult2f90 .*/              xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^spawnargvf03 .*/               xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^spawnmultf03 .*/               xfail=csr/mpich-ofi#965   test/mpi/f90/spawn/testlist
* * * * * am *        /^badport .*/                    xfail=csr/mpich-ofi#965   test/mpi/errors/spawn/testlist
* * * * * am *        /^connect_timeout_no_accept .*/  xfail=csr/mpich-ofi#965   test/mpi/errors/spawn/testlist
* * * * * am *        /^connect_timeout_mismatch .*/   xfail=csr/mpich-ofi#965   test/mpi/errors/spawn/testlist
* * * * * am *        /^multispawn .*/                 xfail=csr/mpich-ofi#965   test/mpi/threads/spawn/testlist
* * * * * am *        /^.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/  xfail=no_am_triggered_ops   test/mpi/coll/testlist.collalgo
* icc default sockets no-odd-even am *  /^sendrecv1 .*/                  xfail=mpich-ofi#2230        test/mpi/pt2pt/testlist.dtp
* * * * auto am *     /^nonblocking.* env=MPIR_CVAR_COLLECTIVE_FALLBACK=silent .*/   xfail=mpich-ofi#2546        test/mpi/coll/testlist.collalgo
* * * * netmod am *   /^nonblocking.* env=MPIR_CVAR_COLLECTIVE_FALLBACK=silent .*/   xfail=mpich-ofi#2546        test/mpi/coll/testlist.collalgo

* * * * auto am *  /^[ip]*ssendf .*/   xfail=mpich#3915  test/mpi/f77/pt2pt/testlist
* * * * auto am *  /^[ip]*ssendf90 .*/   xfail=mpich#3915  test/mpi/f90/pt2pt/testlist
* * * * auto am *  /^[ip]*ssendf08 .*/   xfail=mpich#3915  test/mpi/f08/pt2pt/testlist

* * default * * * *  /^icm .*/   xfail=csr/mpich-ofi#379  test/mpi/comm/testlist


################################################################################
## Triggered ops failure
* * * * * * *       /^alltoall env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/              xfail=no_support_triggered_ops  test/mpi/threads/pt2pt/testlist
* * * * * * *       /^atomic_get_float_int env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/  xfail=csr/mpich-ofi#2039        test/mpi/rma/testlist
* * * * * * *       /^atomic_get_2int env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/       xfail=csr/mpich-ofi#2039        test/mpi/rma/testlist
* * * * * * *       /^spawn_rootargs env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/        xfail=no_support_triggered_ops  test/mpi/spawn/testlist
* * * * * * *       /^.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/                    xfail=no_errors_triggered_ops   test/mpi/errors/coll/testlist
* * * * * * *       /^allred3.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/             xfail=no_support_triggered_ops  test/mpi/coll/testlist.collalgo
* * * * * * *       /^allred.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/              xfail=no_support_triggered_ops  test/mpi/coll/testlist.collalgo
* * * * * * *       /^allred2.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/             xfail=no_support_triggered_ops  test/mpi/coll/testlist.collalgo
* * * * * * *       /^allred6.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/             xfail=no_support_triggered_ops  test/mpi/coll/testlist.collalgo
* * * * * * *       /^gather_big.* env=MPIR_CVAR_BARRIER_INTRA_ALGORITHM=nb .*/          xfail=csr/mpich-ofi#4371        test/mpi/coll/testlist.collalgo
* * * * * * *       /^allgatherv4.* env=MPIR_CVAR_BARRIER_INTRA_ALGORITHM=nb .*/         xfail=csr/mpich-ofi#4371        test/mpi/coll/testlist.collalgo

# In order to make triggered ops work on sockets, auto progress=on is required
# but the default capability set for sockets is auto progress=off, so default
# builds are not supported.
* * default * * * *   /^.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/   xfail=no_support_triggered_ops  test/mpi/coll/testlist.collalgo
* * opt * * * *       /^.* env=MPIR_CVAR_CH4_OFI_ENABLE_TRIGGERED=1 .*/   xfail=no_support_triggered_ops  test/mpi/coll/testlist.collalgo

################################################################################
## Large tests for per-commit testing
nightly * * * * * *         /^[a-zA-Z0-9_]* .*count=262144.*/   xfail=performance  test/mpi/rma/testlist
per-commit * * * * * *      /^[a-zA-Z0-9_]* .*count=262144.*/   xfail=performance  test/mpi/rma/testlist
per-commit-gpu * * * * * *  /^[a-zA-Z0-9_]* .*count=262144.*/   xfail=performance  test/mpi/rma/testlist

################################################################################
## multinode-specific failures
## All IO tests
multinode * * * * * *         /[a-z].* .*/              xfail=mpich-ofi           test/mpi/f77/io/testlist
multinode * * * * * *         /[a-z].* .*/              xfail=mpich-ofi           test/mpi/f90/io/testlist
multinode * * * * * *         /[a-z].* .*/              xfail=mpich-ofi           test/mpi/cxx/io/testlist
multinode * * * * * *         /[a-z].* .*/              xfail=mpich-ofi           test/mpi/io/testlist
multinode * * psm2 * noam *   /^large_type_sendrec .*/   xfail=csr/mpich-ofi#1966  test/mpi/datatype/testlist

################################################################################
## Validation xfails
#Comment out the testgroups except for attr, coll, rma, pt2pt
validation * * * * * *  /^[a-z@].*/ disable  test/mpi/testlist
validation * * * * * *  /attr/      enable   test/mpi/testlist
validation * * * * * *  /coll/      enable   test/mpi/testlist
validation * * * * * *  /pt2pt/     enable   test/mpi/testlist
validation * * * * * *  /@rmadir/   enable   test/mpi/testlist
#attr xfails
validation * * * * * *  /^[a-z@].*/   xfail=validation  test/mpi/attr/testlist.dtp
validation * * * * * *  /^attr.* .*/  xfail=validation  test/mpi/attr/testlist
validation * * * * * *  /key.* .*/    xfail=validation  test/mpi/attr/testlist
#Coll xfails
validation * * * * * *  /^[a-z@].*/              xfail=validation  test/mpi/coll/testlist.collalgo
validation * * * * * *  /^[a-z@].*/              xfail=validation  test/mpi/coll/testlist.dtp
validation * * * * * *  /^allredmany .*/         xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^reduce_local .*/       xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^alltoallw.* .*/        xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^allgather2 .*/         xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^allgather3 .*/         xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^allgatherv2 .*/        xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^allgatherv3 .*/        xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^allgather_struct .*/   xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^bcasttest .*/          xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^bcast_full .*/         xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^bcastzerotype .*/      xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll2 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll3 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll5 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll6 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll7 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll8 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll9 .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll10 .*/             xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll11 .*/             xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^coll13 .*/             xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^redscat 4/             xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^redscat3 .*/           xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^red_scat_block .*/     xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^redscatblk3 .*/        xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^gather.* .*/           xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /scan.* .*/              xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^scatter2 .*/           xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^scatter3 .*/           xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^i.* .*/                xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /op.* .*/                xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^nonblocking.* .*/      xfail=validation  test/mpi/coll/testlist
validation * * * * * *  /^nb.* .*/               disable           test/mpi/coll/testlist
validation * * * * * *  /icbcast 4/              enable            test/mpi/coll/testlist
validation * * * * * *  /nonblocking 10/         enable            test/mpi/coll/testlist
validation * * * * * *  /nbicbcast .*/           enable            test/mpi/coll/testlist
validation * * * * * *  /nballtoall1 .*/         enable            test/mpi/coll/testlist
validation * * * * * *  /nbicallreduce .*/       enable            test/mpi/coll/testlist
validation * * * * * *  /nbicreduce .*/          enable            test/mpi/coll/testlist
validation * * * * * *  /nbicscatter .*/         enable            test/mpi/coll/testlist
validation * * * * * *  /nbicscatterv .*/        enable            test/mpi/coll/testlist
validation * * * * * *  /nbicallgatherv .*/      enable            test/mpi/coll/testlist
validation * * * * * *  /nbicbarrier .*/         enable            test/mpi/coll/testlist
## RMA failure. Mark everything as xfail and unmark the required ones
validation * * * * * *  /[a-z].* .*/        disable  test/mpi/rma/testlist
validation * * * * * *  /putfidx 4/         enable   test/mpi/rma/testlist
validation * * * * * *  /test1 2/           enable   test/mpi/rma/testlist
validation * * * * * *  /window_creation 2/ enable   test/mpi/rma/testlist
## pt2pt failure. Mark everything as xfail and unmark the required ones
validation * * * * * *  /^[a-z].*/        disable  test/mpi/pt2pt/testlist.dtp
validation * * * * * *  /[a-z].* .*/      disable  test/mpi/pt2pt/testlist
validation * * * * * *  /sendrecv3 2/     enable   test/mpi/pt2pt/testlist
validation * * * * * *  /sendself 1/      enable   test/mpi/pt2pt/testlist
validation * * * * * *  /sendall 4/       enable   test/mpi/pt2pt/testlist
validation * * * * * *  /anyall 2/        enable   test/mpi/pt2pt/testlist
validation * * * * * *  /bsend5 4/        enable   test/mpi/pt2pt/testlist
validation * * * * * *  /bsendpending 2/  enable   test/mpi/pt2pt/testlist
validation * * * * * *  /icsend 4/        enable   test/mpi/pt2pt/testlist
validation * * * * * *  /dtype_send 2/    enable   test/mpi/pt2pt/testlist

# xfail list for the "direct" threading model (assuming single VCI)
* * debug * no-odd-even noam *  /^ctxi?dup .*/   xfail=csr/mpich-ofi#1739  test/mpi/threads/comm/testlist

# xfail due to skl32 cluster issues
* * * * * * *  /[a-z].* .*/   xfail=mpich-ofi#2020  test/mpi/f77/io/testlist
* * * * * * *  /[a-z].* .*/   xfail=mpich-ofi#2020  test/mpi/f90/io/testlist
* * * * * * *  /[a-z].* .*/   xfail=mpich-ofi#2020  test/mpi/cxx/io/testlist

################################################################################
#xfail for PVARs test
* * * * * am *              /^mpit_isendirecv .*/      xfail=mpich-ofi#2332  test/mpi/mpi_t/testlist
* * * * no-odd-even * *     /^mpit_isendirecv .*/      xfail=mpich-ofi#2332  test/mpi/mpi_t/testlist
* * * * * am *              /^multinic_mcomms .*/      xfail=mpich-ofi#2332  test/mpi/pt2pt/testlist
* * * * no-odd-even * *     /^multinic_mcomms .*/      xfail=mpich-ofi#2332  test/mpi/pt2pt/testlist
* * * * * am *              /^multinic_msendrecv .*/   xfail=mpich-ofi#2332  test/mpi/pt2pt/testlist
* * * * no-odd-even * *     /^multinic_msendrecv .*/   xfail=mpich-ofi#2332  test/mpi/pt2pt/testlist
* * * * * am *              /^multinic_infohints .*/   xfail=mpich-ofi#2332  test/mpi/pt2pt/testlist
* * * * no-odd-even * *     /^multinic_infohints .*/   xfail=mpich-ofi#2332  test/mpi/pt2pt/testlist
* * * * * am *              /^mpit_mputget .*/         xfail=mpich-ofi#2332  test/mpi/rma/testlist
* * * * no-odd-even * *     /^mpit_mputget .*/         xfail=mpich-ofi#2332  test/mpi/rma/testlist
* * * * auto * *            /^mpit_mputget .*/         xfail=mpich-ofi#2332  test/mpi/rma/testlist
* * * verbs;ofi_rxm * * *   /^mpit_mputget .*/         xfail=mpich-ofi#2332  test/mpi/rma/testlist

################################################################################
# GPU-specific failures
* * * verbs;ofi_rxm * * *   /[a-z0-9].* .*/    xfail=mpich-ofi#2575          test/mpi/rma/testlist.gpu

per-commit-gpu * * * * * *              /[a-z].* .*/                              xfail=a20_spawn_fail_for_sockets  test/mpi/spawn/testlist
per-commit-gpu * * * * * *              /[a-z].* .*/                              xfail=a20_spawn_fail_for_sockets  test/mpi/f77/spawn/testlist
per-commit-gpu * * * * * *              /[a-z].* .*/                              xfail=a20_spawn_fail_for_sockets  test/mpi/f90/spawn/testlist
per-commit-gpu * * * * * *              /[a-z].* .*/                              xfail=a20_spawn_fail_for_sockets  test/mpi/cxx/spawn/testlist
per-commit-gpu * * * * * *              /[a-z].* .*/                              xfail=a20_spawn_fail_for_sockets  test/mpi/threads/spawn/testlist
per-commit-gpu * * sockets netmod * *   /cas_type_check .*/                       xfail=a20_sockets_failure         test/mpi/errors/rma/testlist
per-commit-gpu * * verbs;ofi_rxm * * *  /gather_big .*/                           xfail=l0_malloc_4gb_limit         test/mpi/coll/testlist.collalgo

nightly-gpu * * * * * *               /[a-z].* .*/         xfail=a20_spawn_fail_for_sockets  test/mpi/spawn/testlist
nightly-gpu * * * * * *               /[a-z].* .*/         xfail=a20_spawn_fail_for_sockets  test/mpi/f77/spawn/testlist
nightly-gpu * * * * * *               /[a-z].* .*/         xfail=a20_spawn_fail_for_sockets  test/mpi/f90/spawn/testlist
nightly-gpu * * * * * *               /[a-z].* .*/         xfail=a20_spawn_fail_for_sockets  test/mpi/cxx/spawn/testlist
nightly-gpu * * * * * *               /[a-z].* .*/         xfail=a20_spawn_fail_for_sockets  test/mpi/threads/spawn/testlist
nightly-gpu * * sockets netmod * *    /cas_type_check .*/  xfail=a20_sockets_failure         test/mpi/errors/rma/testlist
nightly-gpu * * verbs;ofi_rxm * * *   /gather_big .*/      xfail=l0_malloc_4gb_limit         test/mpi/coll/testlist.collalgo
nightly-gpu * * verbs;ofi_rxm * * *   /allred .*/          xfail=#4468                       test/mpi/coll/testlist.collalgo
nightly-gpu * * verbs;ofi_rxm * * *   /allred2 .*/         xfail=#4468                       test/mpi/coll/testlist.collalgo
nightly-gpu * * verbs;ofi_rxm * * *   /reduce .*/          xfail=#4468                       test/mpi/coll/testlist.collalgo
nightly-gpu * * verbs;ofi_rxm * * *   /op_coll .*/         xfail=#4468                       test/mpi/coll/testlist.collalgo
nightly-gpu * * verbs;ofi_rxm * * *   /bcast .*/           xfail=#4468                       test/mpi/coll/testlist.collalgo
nightly-gpu * * sockets * * *         /accfence1 .*/       xfail=#4468                       test/mpi/rma/testlist.collalgo
nightly-gpu * * sockets * * *         /putfence1 .*/       xfail=#4468                       test/mpi/rma/testlist.collalgo

################################################################################
# # non-pmix supported test
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/spawn/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/threads/spawn/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/f90/spawn/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/f77/spawn/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/f08/spawn/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/cxx/spawn/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2291      test/mpi/errors/spawn/testlist
* * * * * * pmix  /^darray_pack 72/   xfail=csr/mpich-ofi#2292  test/mpi/datatype/testlist
* * * * * * pmix  /[a-z].* .*/        xfail=mpich-ofi#2293      test/mpi/coll/testlist.collalgo
* * * * * * pmix  /^timeout .*/       xfail=mpich-ofi#2295      test/mpi/init/testlist
################################################################################

# Integration reset failures
* * debug sockets auto noam *   /^cas_type_check .*/             xfail=mpich-ofi#4307  test/mpi/errors/rma/testlist
* * * * * * *                   /^rqfreeb .*/                    xfail=mpich-ofi#4308  test/mpi/pt2pt/testlist
* * * psm2 auto noam *          /^alltoall .*/                   xfail=mpich-ofi#4309  test/mpi/threads/pt2pt/testlist
* * * psm2 netmod noam *        /^alltoall .*/                   xfail=mpich-ofi#4309  test/mpi/threads/pt2pt/testlist
* * debug * auto noam *         /^mpit_isendirecv .*/            xfail=mpich-ofi#4340  test/mpi/mpi_t/testlist
* * debug * netmod noam *       /^mpit_isendirecv .*/            xfail=mpich-ofi#4340  test/mpi/mpi_t/testlist
* * debug psm2 netmod noam *    /^sendself [0-9]* [a-zA-Z0-9_\/]* arg=-type=MPI_C_DOUBLE_COMPLEX arg=-sendcnt=8192 arg=-recvcnt=8192 .*/   xfail=mpich-ofi#4341  test/mpi/pt2pt/testlist
* * default psm2 netmod noam *  /^sendself [0-9]* [a-zA-Z0-9_\/]* arg=-type=MPI_C_DOUBLE_COMPLEX arg=-sendcnt=8192 arg=-recvcnt=8192 .*/   xfail=mpich-ofi#4341  test/mpi/pt2pt/testlist
* * * * no-odd-even * * sed     /^tresized .*/                   xfail=mpich-ofi#4470  test/mpi/datatype/testlist
* * * * no-odd-even * * sed     /^tresized2 .*/                  xfail=mpich-ofi#4470  test/mpi/datatype/testlist
* * * * no-odd-even * * sed     /^sendrecvt2 .*/                 xfail=mpich-ofi#4470  test/mpi/datatype/testlist
* * * * no-odd-even * * sed     /^truncmsg1 .*/                  xfail=mpich-ofi#4470  test/mpi/errors/pt2pt/testlist

################################################################################
